paths:
  /api/decks:
    post:
      tags:
        - Decks
      summary: Créer un nouveau deck
      description: Crée un nouveau deck avec exactement 10 cartes pour l'utilisateur authentifié
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDeckRequest'
      responses:
        '201':
          description: Deck créé avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deck'
        '400':
          description: Données invalides (nom manquant, deck pas exactement 10 cartes, cartes inexistantes)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: 'Bad Request'
                message: 'Un deck doit contenir exactement 10 cartes'
        '401':
          description: Token manquant ou invalide
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Erreur serveur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/decks/mine:
    get:
      tags:
        - Decks
      summary: Liste tous les decks de l'utilisateur
      description: Retourne tous les decks créés par l'utilisateur authentifié, triés par date de création décroissante
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Liste des decks de l'utilisateur
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Deck'
        '401':
          description: Token manquant ou invalide
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Erreur serveur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/decks/{id}:
    get:
      tags:
        - Decks
      summary: Récupère un deck par son ID
      description: Retourne les détails d'un deck spécifique avec toutes ses cartes. Le deck doit appartenir à l'utilisateur authentifié.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID du deck
          example: 1
      responses:
        '200':
          description: Détails du deck
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deck'
        '400':
          description: ID invalide
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Token manquant ou invalide
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Le deck n'appartient pas à l'utilisateur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error: 'Forbidden'
                message: "Vous n'avez pas accès à ce deck"
        '404':
          description: Deck introuvable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Erreur serveur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    patch:
      tags:
        - Decks
      summary: Modifie un deck existant
      description: Permet de modifier le nom et/ou les cartes d'un deck. Si les cartes sont modifiées, il doit y en avoir exactement 10.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID du deck
          example: 1
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDeckRequest'
      responses:
        '200':
          description: Deck modifié avec succès
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Deck'
        '400':
          description: Données invalides (ID invalide, deck pas exactement 10 cartes, cartes inexistantes)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Token manquant ou invalide
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Le deck n'appartient pas à l'utilisateur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Deck introuvable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Erreur serveur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    delete:
      tags:
        - Decks
      summary: Supprime un deck
      description: Supprime définitivement un deck et toutes ses cartes associées. Le deck doit appartenir à l'utilisateur authentifié.
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: ID du deck
          example: 1
      responses:
        '200':
          description: Deck supprimé avec succès
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 'Deck supprimé avec succès'
        '400':
          description: ID invalide
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '401':
          description: Token manquant ou invalide
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '403':
          description: Le deck n'appartient pas à l'utilisateur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Deck introuvable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Erreur serveur
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
